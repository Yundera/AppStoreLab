name: claude-code

services:
  claude-code:
    image: ghcr.io/yundera/claude-code-container:main
    container_name: claude-code
    restart: unless-stopped
    user: 0:0
    expose:
      - 8080
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - AUTH_PASSWORD=$default_pwd
      - PROXY_PORT=8080
      - TTYD_PORT=7681
      - TTYD_URL=http://localhost:7681
    volumes:
      - type: bind
        source: /DATA/AppData/claude-code/workspace
        target: /home/claude/workspace
    networks:
      pcs: null
    cpu_shares: 70
    deploy:
      resources:
        limits:
          memory: 2048M

networks:
  pcs:
    name: pcs

x-casaos:
  architectures:
    - amd64
    - arm64
  main: claude-code
  author: Yundera
  category: Developer
  description:
    en_us: |
      Claude Code Container - Web-based terminal interface for Claude Code (Anthropic's CLI for Claude).

      Features:
      - Web-based terminal access to Claude Code
      - Styled login page with session management
      - Persistent workspace volume
      - Claude starts automatically on connection

      Default password is auto-generated. Check the app settings for the AUTH_PASSWORD value.
    zh_cn: |
      Claude Code 容器 - Claude Code（Anthropic 的 Claude CLI）的 Web 终端界面。

      功能：
      - 基于 Web 的 Claude Code 终端访问
      - 带会话管理的登录页面
      - 持久化工作区
      - 连接时自动启动 Claude
  developer: Anthropic / Yundera
  icon: https://cdn.jsdelivr.net/gh/Yundera/AppStoreLab@main/Apps/ClaudeCode/icon.png
  screenshot_link:
    - https://cdn.jsdelivr.net/gh/Yundera/AppStoreLab@main/Apps/ClaudeCode/screenshot-1.png
    - https://cdn.jsdelivr.net/gh/Yundera/AppStoreLab@main/Apps/ClaudeCode/screenshot-2.png
    - https://cdn.jsdelivr.net/gh/Yundera/AppStoreLab@main/Apps/ClaudeCode/screenshot-3.png
  tagline:
    en_us: Web terminal for Claude Code - Anthropic's AI coding assistant
    zh_cn: Claude Code 的 Web 终端 - Anthropic 的 AI 编程助手
  thumbnail: https://cdn.jsdelivr.net/gh/Yundera/AppStoreLab@main/Apps/ClaudeCode/thumbnail.png
  title:
    en_us: Claude Code
    zh_cn: Claude Code
  index: /
  webui_port: 8080
  envs:
    - container: ANTHROPIC_API_KEY
      description:
        en_us: Your Anthropic API key for Claude
        zh_cn: 您的 Anthropic API 密钥
    - container: AUTH_PASSWORD
      description:
        en_us: Password for terminal access (auto-generated)
        zh_cn: 终端访问密码（自动生成）
  volumes:
    - container: /home/claude/workspace
      description:
        en_us: Claude Code workspace directory
        zh_cn: Claude Code 工作区目录
  tips:
    before_install:
      en_us: |
        You need an Anthropic API key to use Claude Code.
        Get one at: https://console.anthropic.com/
      zh_cn: |
        使用 Claude Code 需要 Anthropic API 密钥。
        获取地址：https://console.anthropic.com/
  pre-install-cmd: |
    mkdir -p /DATA/AppData/claude-code/workspace &&
    chown -R 1000:1000 /DATA/AppData/claude-code
