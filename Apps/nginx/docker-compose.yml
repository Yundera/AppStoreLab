name: nginx

services:
  nginx:
    image: nginx:1.27-alpine
    container_name: nginx
    user: "0:0"
    restart: unless-stopped
    network_mode: bridge
    expose:
      - 80
    volumes:
      - type: bind
        source: /DATA/AppData/$AppID/www
        target: /usr/share/nginx/html
        read_only: false
      - type: bind
        source: /DATA/AppData/$AppID/nginx.conf
        target: /etc/nginx/conf.d/default.conf
        read_only: true
    environment:
      - PUID=0
      - PGID=0
      - TZ=$TZ
      - NGINX_HOST=$domain
      - NGINX_PORT=80
    deploy:
      resources:
        limits:
          memory: 64M
          cpus: '0.25'
    cpu_shares: 50

x-casaos:
  architectures:
    - amd64
    - arm64
    - arm
  main: nginx
  webui_port: 80
  author: Yundera Team
  category: WEB
  description:
    en_us: |
      **ðŸŒ What is Nginx Static?**

      **Nginx Static** is a lightweight, high-performance web server for hosting static websites, HTML pages, JavaScript applications, and documentation sites. Built on nginx, the world's most popular web server, it delivers your content blazingly fast with minimal resource usage.

      Perfect for:
      â€¢ Personal websites and portfolios
      â€¢ Single-page applications (React, Vue, Angular)
      â€¢ Documentation sites
      â€¢ Landing pages and marketing sites
      â€¢ Static site generators (Hugo, Jekyll, Gatsby)
      â€¢ HTML/CSS/JavaScript projects

      **Key Features:**

      â€¢ **Zero Configuration** â€” Drop your files in and start serving immediately
      â€¢ **Lightning Fast** â€” nginx delivers static content faster than any alternative
      â€¢ **Minimal Resources** â€” Runs efficiently with just 64MB RAM
      â€¢ **Clean URLs** â€” Automatic HTTPS access via NSL.SH routing
      â€¢ **Modern Web Support** â€” Full support for SPAs, PWAs, and modern JavaScript
      â€¢ **Production Ready** â€” Battle-tested nginx powers 30% of the internet

      Simply upload your HTML, CSS, JavaScript, and assets to `/DATA/AppData/nginx/www/` and your site is instantly live. No databases, no complex configuration, just pure static file hosting done right.

      **ðŸš€ Why Choose Nginx Static?**

      **Nginx Static** gives you complete control over your web hosting without the complexity of managed services or the overhead of full-featured CMSs. It's the fastest way to get static content online.

      Why choose Nginx Static?
      â€¢ **Your content, your server** â€” no external hosting dependencies
      â€¢ **Industry standard** â€” nginx is trusted by millions of production websites
      â€¢ **Zero overhead** â€” no backend processing, no database queries
      â€¢ **Instant updates** â€” edit files and changes appear immediately
      â€¢ **Developer friendly** â€” works with any static site workflow

      With Nginx Static on **Yundera**, you can:
      â€¢ Host unlimited static sites
      â€¢ Deploy modern JavaScript applications
      â€¢ Serve API documentation
      â€¢ Create internal company websites
      â€¢ Test frontend projects before production

      **ðŸ› ï¸ Perfect For:**
      â€¢ Frontend developers testing static builds
      â€¢ Teams needing internal documentation sites
      â€¢ Anyone wanting simple, fast web hosting
      â€¢ Projects that don't need server-side processing
    zh_cn: |
      **ðŸŒ ä»€ä¹ˆæ˜¯ Nginx Staticï¼Ÿ**

      **Nginx Static** æ˜¯ä¸€ä¸ªè½»é‡çº§ã€é«˜æ€§èƒ½çš„ Web æœåŠ¡å™¨ï¼Œç”¨äºŽæ‰˜ç®¡é™æ€ç½‘ç«™ã€HTML é¡µé¢ã€JavaScript åº”ç”¨ç¨‹åºå’Œæ–‡æ¡£ç«™ç‚¹ã€‚åŸºäºŽ nginxï¼ˆä¸–ç•Œä¸Šæœ€æµè¡Œçš„ Web æœåŠ¡å™¨ï¼‰æž„å»ºï¼Œå®ƒä»¥æœ€å°çš„èµ„æºä½¿ç”¨å¿«é€Ÿä¼ é€’æ‚¨çš„å†…å®¹ã€‚

      é€‚ç”¨äºŽï¼š
      â€¢ ä¸ªäººç½‘ç«™å’Œä½œå“é›†
      â€¢ å•é¡µåº”ç”¨ç¨‹åºï¼ˆReactã€Vueã€Angularï¼‰
      â€¢ æ–‡æ¡£ç«™ç‚¹
      â€¢ ç™»é™†é¡µé¢å’Œè¥é”€ç«™ç‚¹
      â€¢ é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼ˆHugoã€Jekyllã€Gatsbyï¼‰
      â€¢ HTML/CSS/JavaScript é¡¹ç›®

      **ä¸»è¦åŠŸèƒ½ï¼š**

      â€¢ **é›¶é…ç½®** â€” æ”¾å…¥æ–‡ä»¶å³å¯ç«‹å³å¼€å§‹æœåŠ¡
      â€¢ **é—ªç”µèˆ¬å¿«é€Ÿ** â€” nginx æ¯”ä»»ä½•æ›¿ä»£æ–¹æ¡ˆéƒ½æ›´å¿«åœ°ä¼ é€’é™æ€å†…å®¹
      â€¢ **æœ€å°èµ„æº** â€” ä»…éœ€ 64MB RAM å³å¯é«˜æ•ˆè¿è¡Œ
      â€¢ **æ¸…æ´ URL** â€” é€šè¿‡ NSL.SH è·¯ç”±è‡ªåŠ¨ HTTPS è®¿é—®
      â€¢ **çŽ°ä»£ Web æ”¯æŒ** â€” å®Œå…¨æ”¯æŒ SPAã€PWA å’ŒçŽ°ä»£ JavaScript
      â€¢ **ç”Ÿäº§å°±ç»ª** â€” ç»è¿‡å®žæˆ˜æ£€éªŒçš„ nginx ä¸º 30% çš„äº’è”ç½‘æä¾›åŠ¨åŠ›

      åªéœ€å°†æ‚¨çš„ HTMLã€CSSã€JavaScript å’Œèµ„æºä¸Šä¼ åˆ° `/DATA/AppData/nginx/www/`ï¼Œæ‚¨çš„ç½‘ç«™å°±ä¼šç«‹å³ä¸Šçº¿ã€‚æ— éœ€æ•°æ®åº“ï¼Œæ— éœ€å¤æ‚é…ç½®ï¼Œåªéœ€çº¯é™æ€æ–‡ä»¶æ‰˜ç®¡ã€‚
  developer: nginx
  icon: https://cdn.jsdelivr.net/gh/Yundera/AppStoreLab@main/Apps/nginx/icon.png
  screenshot_link:
    - https://cdn.jsdelivr.net/gh/Yundera/AppStoreLab@main/Apps/nginx/screenshot-1.png
  tagline:
    en_us: Lightning-fast static website hosting powered by nginx
    zh_cn: ç”± nginx æä¾›æ”¯æŒçš„é—ªç”µèˆ¬å¿«é€Ÿé™æ€ç½‘ç«™æ‰˜ç®¡
  thumbnail: https://cdn.jsdelivr.net/gh/Yundera/AppStoreLab@main/Apps/nginx/thumbnail.png
  tips:
    before_install:
      en_us: |
        **ðŸ“ Setup Instructions**

        After installation, add your website files to:
        `/DATA/AppData/nginx/www/`

        **Quick Start:**
        1. Install the app
        2. Upload your website files to the www directory
        3. Access your site at: `https://nginx-$domain/`

        **Default Setup:**
        â€¢ A sample index.html is included to get you started
        â€¢ Edit or replace it with your own content
        â€¢ nginx.conf is pre-configured for optimal static hosting

        **File Structure:**
        ```
        /DATA/AppData/nginx/
        â”œâ”€â”€ www/              # Your website files go here
        â”‚   â”œâ”€â”€ index.html   # Main page
        â”‚   â”œâ”€â”€ css/         # Stylesheets
        â”‚   â”œâ”€â”€ js/          # JavaScript files
        â”‚   â””â”€â”€ assets/      # Images, fonts, etc.
        â””â”€â”€ nginx.conf       # nginx configuration
        ```

        **Single Page Apps (SPA):**
        For React, Vue, or Angular apps, the included nginx.conf automatically handles client-side routing by serving index.html for all routes.

        **Resources:** ~64MB memory, minimal CPU
    zh_cn: |
      **ðŸ“ è®¾ç½®è¯´æ˜Ž**

      å®‰è£…åŽï¼Œå°†æ‚¨çš„ç½‘ç«™æ–‡ä»¶æ·»åŠ åˆ°ï¼š
      `/DATA/AppData/nginx/www/`

      **å¿«é€Ÿå¼€å§‹ï¼š**
      1. å®‰è£…åº”ç”¨
      2. å°†æ‚¨çš„ç½‘ç«™æ–‡ä»¶ä¸Šä¼ åˆ° www ç›®å½•
      3. è®¿é—®æ‚¨çš„ç«™ç‚¹ï¼š`https://nginx-$domain/`

      **é»˜è®¤è®¾ç½®ï¼š**
      â€¢ åŒ…å«ç¤ºä¾‹ index.html ä¾›æ‚¨å…¥é—¨
      â€¢ ç¼–è¾‘æˆ–ç”¨æ‚¨è‡ªå·±çš„å†…å®¹æ›¿æ¢
      â€¢ nginx.conf å·²é¢„é…ç½®ç”¨äºŽæœ€ä½³é™æ€æ‰˜ç®¡

      **èµ„æºï¼š** çº¦ 64MB å†…å­˜ï¼Œæœ€å° CPU
  title:
    en_us: Nginx Static
  index: /
  pre_install:
    - |
      # Create necessary directories
      mkdir -p /DATA/AppData/$AppID/www

      # Create default index.html if it doesn't exist
      if [ ! -f "/DATA/AppData/$AppID/www/index.html" ]; then
        cat > /DATA/AppData/$AppID/www/index.html <<'EOF'
      <!DOCTYPE html>
      <html lang="en">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Welcome to Nginx Static</title>
          <style>
              * {
                  margin: 0;
                  padding: 0;
                  box-sizing: border-box;
              }
              body {
                  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
                  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                  min-height: 100vh;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  color: #fff;
                  padding: 20px;
              }
              .container {
                  max-width: 800px;
                  background: rgba(255, 255, 255, 0.1);
                  backdrop-filter: blur(10px);
                  border-radius: 20px;
                  padding: 60px 40px;
                  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
                  border: 1px solid rgba(255, 255, 255, 0.18);
                  text-align: center;
              }
              h1 {
                  font-size: 3em;
                  margin-bottom: 20px;
                  font-weight: 700;
              }
              p {
                  font-size: 1.2em;
                  line-height: 1.6;
                  margin-bottom: 30px;
                  opacity: 0.9;
              }
              .code-block {
                  background: rgba(0, 0, 0, 0.3);
                  padding: 20px;
                  border-radius: 10px;
                  font-family: 'Courier New', monospace;
                  text-align: left;
                  margin: 20px 0;
                  overflow-x: auto;
              }
              .highlight {
                  color: #ffd700;
                  font-weight: 600;
              }
              .button {
                  display: inline-block;
                  margin-top: 20px;
                  padding: 15px 30px;
                  background: rgba(255, 255, 255, 0.2);
                  border: 2px solid rgba(255, 255, 255, 0.4);
                  border-radius: 50px;
                  color: #fff;
                  text-decoration: none;
                  font-weight: 600;
                  transition: all 0.3s ease;
              }
              .button:hover {
                  background: rgba(255, 255, 255, 0.3);
                  transform: translateY(-2px);
                  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
              }
              .emoji {
                  font-size: 4em;
                  margin-bottom: 20px;
              }
          </style>
      </head>
      <body>
          <div class="container">
              <div class="emoji">ðŸš€</div>
              <h1>Welcome to Nginx Static!</h1>
              <p>Your static website server is up and running successfully.</p>

              <p>To add your own website, upload your files to:</p>
              <div class="code-block">
                  <span class="highlight">/DATA/AppData/nginx/www/</span>
              </div>

              <p>Replace this <code>index.html</code> file with your own content, or build your entire site structure here. nginx will serve everything lightning fast!</p>

              <p><strong>Perfect for:</strong> HTML/CSS/JS sites, React, Vue, Angular apps, documentation, portfolios, and more.</p>

              <a href="https://nginx.org/en/docs/" class="button" target="_blank">nginx Documentation</a>
          </div>
      </body>
      </html>
      EOF
      fi

      # Create optimized nginx configuration for static sites and SPAs
      if [ ! -f "/DATA/AppData/$AppID/nginx.conf" ]; then
        cat > /DATA/AppData/$AppID/nginx.conf <<'EOF'
      server {
          listen 80;
          listen [::]:80;
          server_name _;

          root /usr/share/nginx/html;
          index index.html index.htm;

          # Enable gzip compression
          gzip on;
          gzip_vary on;
          gzip_min_length 1024;
          gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/json application/javascript;

          # Security headers
          add_header X-Frame-Options "SAMEORIGIN" always;
          add_header X-Content-Type-Options "nosniff" always;
          add_header X-XSS-Protection "1; mode=block" always;

          # Caching for static assets
          location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2|ttf|eot)$ {
              expires 1y;
              add_header Cache-Control "public, immutable";
          }

          # SPA support - serve index.html for all routes
          location / {
              try_files $uri $uri/ /index.html;
          }

          # Disable logging for favicon and robots.txt
          location = /favicon.ico {
              log_not_found off;
              access_log off;
          }

          location = /robots.txt {
              log_not_found off;
              access_log off;
          }

          # Deny access to hidden files
          location ~ /\. {
              deny all;
              access_log off;
              log_not_found off;
          }
      }
      EOF
      fi

      # Set proper permissions (root runs the container, but files should be accessible)
      chmod -R 755 /DATA/AppData/$AppID
